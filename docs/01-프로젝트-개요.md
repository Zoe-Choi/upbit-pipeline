# M1 맥북에서 실시간 데이터 파이프라인 구축하기 - 프로젝트 개요

> 업비트 API 데이터를 활용한 MLOps 파이프라인을 Docker와 Kubernetes로 구축하는 시리즈입니다.

## 시리즈 목차

### 인프라 구축
1. **프로젝트 개요** (현재 글)
2. [Kafka 클러스터 구축 (KRaft 모드)](./02-kafka-클러스터-구축.md)
3. [Flink 클러스터 구축](./03-flink-클러스터-구축.md)
4. [MinIO + Apache Paimon 스토리지](./04-minio-paimon-스토리지.md)
5. [Cursor MCP 개발 환경 설정](./05-cursor-mcp-설정.md)

### 파이프라인 구현
6. [Upbit 파이프라인 구현](./06-upbit-pipeline-구현.md)
7. [파이프라인 구축 실습](./07-파이프라인-구축-실습.md)
8. [ClickHouse + Grafana 가이드](./08-clickhouse-grafana-가이드.md)

### 의사결정 & 트러블슈팅
9. [기술 선택 의사결정 과정](./09-기술-선택-의사결정.md) ⭐
10. [에러 노트](./10-에러-노트.md) ⭐
11. [성능 최적화 분석](./11-성능-최적화-분석.md) ⭐

---

## 프로젝트 소개

### 목표

M1 Pro 맥북 (16GB RAM) 환경에서 **실제 운영 환경과 유사한 분산 처리 파이프라인**을 구축합니다.

- 업비트 API/WebSocket에서 실시간 암호화폐 데이터 수집
- Kafka로 대용량 스트리밍 데이터 처리
- Flink로 실시간 분석 및 변환
- Paimon + MinIO로 Data Lake 구축
- 최종적으로 ML 모델 학습 및 서빙

### 왜 이 조합인가?

| 기술 | 역할 | 선택 이유 |
|------|------|----------|
| **Kafka** | 메시지 스트리밍 | 업계 표준, 고가용성, 분산 처리 |
| **Flink** | 스트림 처리 | Exactly-once 보장, 낮은 레이턴시 |
| **Paimon** | 데이터 레이크 테이블 | Flink 네이티브, 실시간 업데이트 |
| **MinIO** | 객체 스토리지 | S3 호환, 로컬 개발에 적합 |

---

## 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                        Data Sources                              │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│  │ Upbit REST  │  │Upbit WebSocket│ │ Other APIs │              │
│  │    API      │  │  (Real-time)  │ │            │              │
│  └──────┬──────┘  └──────┬───────┘  └──────┬─────┘              │
└─────────┼────────────────┼─────────────────┼────────────────────┘
          │                │                 │
          ▼                ▼                 ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Kafka Cluster (KRaft Mode)                    │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│  │  Broker 1   │  │  Broker 2   │  │  Broker 3   │              │
│  │ +Controller │  │ +Controller │  │ +Controller │              │
│  └─────────────┘  └─────────────┘  └─────────────┘              │
│                                                                  │
│  Topics: upbit-ticker, upbit-orderbook, upbit-trades            │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Flink Cluster                                 │
│  ┌─────────────────────────────────────────────────────┐        │
│  │              JobManager (Coordinator)                │        │
│  │         - Job Scheduling & Monitoring               │        │
│  └─────────────────────────────────────────────────────┘        │
│                              │                                   │
│         ┌────────────────────┼────────────────────┐             │
│         ▼                    ▼                    ▼             │
│  ┌────────────┐       ┌────────────┐       (확장 가능)          │
│  │TaskManager1│       │TaskManager2│                            │
│  │  2 slots   │       │  2 slots   │                            │
│  └────────────┘       └────────────┘                            │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│              MinIO (S3-Compatible Storage)                       │
│  ┌─────────────────────────────────────────────────────┐        │
│  │              Apache Paimon Tables                    │        │
│  │  - ACID Transactions                                │        │
│  │  - Time Travel                                      │        │
│  │  - Real-time Updates                               │        │
│  └─────────────────────────────────────────────────────┘        │
│                                                                  │
│  Buckets: paimon / checkpoints / warehouse                      │
└─────────────────────────────────────────────────────────────────┘
```

---

## 개발 환경

### 하드웨어

| 항목 | 사양 |
|------|------|
| 기기 | MacBook Pro (M1 Pro) |
| RAM | 16GB |
| Storage | 512GB SSD |
| OS | macOS Sonoma |

### 소프트웨어

| 항목 | 버전 | 용도 |
|------|------|------|
| Docker Desktop | 4.x | 컨테이너 런타임 |
| Node.js | 18+ | MCP 서버 실행 |
| Python | 3.10+ | 데이터 처리, ML |
| Cursor IDE | 최신 | AI 기반 개발 |

---

## 리소스 할당 계획

16GB RAM에서 여러 서비스를 실행하기 위한 최적화된 리소스 배분:

| 서비스 | 인스턴스 | 메모리 | 합계 |
|--------|----------|--------|------|
| Kafka Broker | 3 | 512MB | 1.5GB |
| Flink JobManager | 1 | 768MB | 0.75GB |
| Flink TaskManager | 2 | 1.3GB | 2.6GB |
| MinIO | 1 | 512MB | 0.5GB |
| Kafka UI | 1 | 512MB | 0.5GB |
| **파이프라인 합계** | | | **~6GB** |
| 시스템 + IDE | | | ~4GB |
| **여유 공간** | | | **~6GB** |

> 여유 공간은 ML 학습, Redis 캐시, 추가 서비스에 활용합니다.

---

## 사전 준비

### 1. Docker Desktop 설치

[Docker Desktop for Mac](https://www.docker.com/products/docker-desktop/)에서 **Apple Silicon** 버전 다운로드

설치 후 리소스 설정:
- Settings > Resources > Memory: **8GB 이상** 권장
- Settings > Resources > CPUs: **4개 이상** 권장

### 2. Node.js 설치 (MCP 서버용)

```bash
# Homebrew로 설치
brew install node

# 버전 확인
node --version  # v18.x 이상
npm --version
```

### 3. 프로젝트 클론

```bash
git clone https://github.com/YOUR_USERNAME/upbit-pipeline.git
cd upbit-pipeline
```

---

## 프로젝트 구조

```
upbit-pipeline/
├── docker-compose.yml          # 전체 인프라 정의
├── kubernetes/                 # K8s 매니페스트 (선택)
│   ├── namespace.yaml
│   ├── kafka.yaml
│   └── kafka-ui.yaml
├── scripts/                    # 유틸리티 스크립트
│   ├── start-docker.sh
│   ├── stop-docker.sh
│   ├── start-k8s.sh
│   ├── stop-k8s.sh
│   └── test-kafka.sh
├── docs/                       # 문서
│   ├── 01-프로젝트-개요.md
│   ├── 02-kafka-클러스터-구축.md
│   └── ...
└── README.md
```

---

## 다음 단계

다음 글에서는 **Kafka 클러스터**를 KRaft 모드로 구축합니다.

- Zookeeper vs KRaft 비교
- 3 브로커 클러스터 설정
- Docker Compose 설정 상세 설명

[다음 글: Kafka 클러스터 구축 (KRaft 모드) →](./02-kafka-클러스터-구축.md)

---

## 참고 자료

- [Apache Kafka 공식 문서](https://kafka.apache.org/documentation/)
- [Apache Flink 공식 문서](https://flink.apache.org/docs/stable/)
- [Apache Paimon 공식 문서](https://paimon.apache.org/docs/master/)
- [MinIO 공식 문서](https://min.io/docs/minio/linux/index.html)

